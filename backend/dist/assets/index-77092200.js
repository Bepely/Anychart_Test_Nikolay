(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const L=()=>{fetch("/default.svg").then(e=>e.text()).then(e=>{const o=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("#default"),t=o.querySelector("#back"),s=o.querySelector("#center"),c=o.querySelector("#spin"),a=document.getElementById("svg");a.innerHTML="",a.appendChild(o),t.appendChild(s),t.appendChild(c)})},x=()=>{fetch("/404.svg").then(e=>e.text()).then(e=>{const o=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("#err404"),t=o.querySelector("#cross"),s=t.querySelector("#Line1"),c=t.querySelector("#Line2"),a=document.getElementById("svg");a.innerHTML="",a.appendChild(o),a.appendChild(t),t.appendChild(s),t.appendChild(c)})},m="http://www.w3.org/2000/svg",h=(e,r)=>{const n=document.createElementNS(m,"circle");return n.setAttribute("r","5"),n.setAttribute("cx",e),n.setAttribute("cy",r),n.setAttribute("stroke","black"),n.setAttribute("fill","black"),n.setAttribute("stroke-width","2"),n.addEventListener("mousemove",o=>console.log("Marker mouseMove emit")),n.addEventListener("mouseout",()=>console.log("Maker mouseOut emit")),n},p=(e,r,n,o)=>{const t=document.createElementNS(m,"line");return t.setAttribute("x1",`${e}`),t.setAttribute("x2",`${n}`),t.setAttribute("y1",`${r}`),t.setAttribute("y2",`${o}`),t.setAttribute("stroke","black"),t.setAttribute("stroke-width","2"),t.setAttribute("fill","none"),t.addEventListener("mousemove",s=>console.log("Line mouseMove emit")),t.addEventListener("mouseout",()=>console.log("Line mouseOut emit")),t},f=()=>document.createElementNS(m,"text"),A=(e,r)=>{for(let n=0;n<r.length-1;n++){const o=r[n][0],t=r[n][1],s=r[n+1][0],c=r[n+1][1],a=p(o,t,s,c);a.setAttribute("id",`line${n}`),a.setAttribute("class","chartLine");let d=h(o,t);e.appendChild(d),e.appendChild(a),d=h(s,c),d.setAttribute("class","marker"),e.appendChild(d),e.appendChild(a)}},S=(e,r,n)=>{const o=r/(e.length-1);let t=e.map(u=>u.value);t=t.filter(function(u){return u!==void 0});const s=Math.min(...t),c=Math.max(...t),a=c-s,d=n/a*.9,i=-s*d;return{coordinates:e.map((u,y)=>{const b=y*o,v=n-(u.value-s)*d;return[Math.floor(b),Math.floor(v)]}),yRange:a,yTranslationFactor:i,yScaleFactor:d,minY:s,maxY:c,xDistance:o}},C=(e,r,n,o)=>{const t=n-r,s=t/4,c=5;for(let a=0;a<=4;a++){const d=o-a*s*o/t,i=f();i.setAttribute("x",c-70),i.setAttribute("y",d+30),i.setAttribute("font-size","18"),i.setAttribute("fill","black"),i.textContent=(r+a*s).toFixed(1),e.appendChild(i)}e.appendChild(p(0,0,0,512*.9))},D=(e,r,n,o)=>{Math.max(...r.map(t=>t.index))-Math.min(...r.map(t=>t.index));for(let t=0;t<r.length;t++){const s=t*n/(r.length-1),c=p(s*.9,o*.9,s*.9,o*.9-5);e.appendChild(c);const a=f();a.setAttribute("x",s*.9),a.setAttribute("y",o*.9+20),a.setAttribute("font-size","18"),a.setAttribute("fill","black"),a.setAttribute("text-anchor","middle"),a.textContent=r[t].x,e.appendChild(a)}e.appendChild(p(0,o*.9,n*.9,o*.9))},k=e=>{const r=document.getElementById("svg");r.setAttribute("fill","#D9D9D9");const n=S(e,1024*.9,512*.9);A(r,n.coordinates),C(r,n.minY,n.maxY,512*.9),D(r,e,1024,512)};function g(){const e=document.getElementById("svg");e.setAttribute("viewBox","0 0 1024 512"),e.style.width="90vw",e.style.height="40vh",e.innerHTML="",l.data.dataStatus==="200"?k(l.data.serverData):l.data.dataStatus==="000"?L():x()}const E=()=>{const e=document.getElementById("cropToggleFirst"),r=document.getElementById("cropToggleLast"),n=document.getElementById("getDataBtn"),o=document.getElementById("urlInput"),t=()=>{l.data.dataStatus=!1,l.data.serverData=[],fetch(s).then(i=>i.json()).then(i=>{l.data.cropDataFirst&&i.data.splice(0,1),l.data.cropDataLast&&i.data.splice(-1,1),l.methods.setData(i.data)}).then(()=>{l.methods.setStatus("200"),g()}).catch(i=>{console.error(i),l.methods.setStatus("404"),g()})};let s="/default";const c=i=>{s=i},a=i=>{l.methods.setCropFirst(i)},d=i=>{l.methods.setCropLast(i)};n.addEventListener("click",()=>{t()}),e.addEventListener("change",i=>{a(i.target.checked)}),r.addEventListener("change",i=>{d(i.target.checked)}),o.addEventListener("input",i=>{c(i.target.value)})};let l={data:{serverData:[],dataStatus:"000",cropDataFirst:!1,cropDataLast:!1},methods:{getData:()=>[l.data.serverData,l.data.dataStatus],setData:e=>{l.data.serverData=e},setStatus:e=>{l.data.dataStatus=e},setCropFirst:e=>{l.data.cropDataFirst=e},setCropLast:e=>{l.data.cropDataLast=e}}};function M(){E()}g();M();
