(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=e(t);fetch(t.href,o)}})();const x=()=>{fetch("/default.svg").then(n=>n.text()).then(n=>{const r=new DOMParser().parseFromString(n,"image/svg+xml").querySelector("#default"),t=r.querySelector("#back"),o=r.querySelector("#center"),c=r.querySelector("#spin"),a=document.getElementById("svg");a.innerHTML="",a.appendChild(r),t.appendChild(o),t.appendChild(c)})},C=()=>{fetch("/404.svg").then(n=>n.text()).then(n=>{const r=new DOMParser().parseFromString(n,"image/svg+xml").querySelector("#err404"),t=r.querySelector("#cross"),o=t.querySelector("#Line1"),c=t.querySelector("#Line2"),a=document.getElementById("svg");a.innerHTML="",a.appendChild(r),a.appendChild(t),t.appendChild(o),t.appendChild(c)})},g="http://www.w3.org/2000/svg",m=(n,s)=>{const e=document.createElementNS(g,"circle");return e.setAttribute("r","5"),e.setAttribute("cx",n),e.setAttribute("cy",s),e.setAttribute("stroke","black"),e.setAttribute("fill","black"),e.setAttribute("stroke-width","2"),e.setAttribute("class","marker"),e.addEventListener("mousemove",r=>console.log("Marker mouseMove emit")),e.addEventListener("mouseout",()=>console.log("Maker mouseOut emit")),e},u=(n,s,e,r)=>{const t=document.createElementNS(g,"line");return t.setAttribute("x1",`${n}`),t.setAttribute("x2",`${e}`),t.setAttribute("y1",`${s}`),t.setAttribute("y2",`${r}`),t.setAttribute("stroke","black"),t.setAttribute("stroke-width","2"),t.setAttribute("fill","none"),t},k=(n,s,e,r)=>{const t=document.createElementNS(g,"rect");return t.setAttribute("x",`${n}`),t.setAttribute("y",`${s}`),t.setAttribute("width",`${e}`),t.setAttribute("height",`${r}`),t.setAttribute("stroke","none"),t.setAttribute("fill","transparent"),t},f=()=>document.createElementNS(g,"text"),v=(n,s)=>{for(let e=0;e<s.length-1;e++){const r=s[e][0]-(s[e][0]-s[e][0]*.8)+102.4,t=s[e][1]-(s[e][1]-s[e][1]*.9),o=s[e+1][0]-(s[e+1][0]-s[e+1][0]*.8)+1024*.1,c=s[e+1][1]-(s[e+1][1]-s[e+1][1]*.9),a=u(r,t,o,c);a.setAttribute("id",`line${e}`),a.setAttribute("class","chartLine");let d=m(r,t);n.appendChild(d),n.appendChild(a),e==s.length-2&&(d=m(o,c),n.appendChild(d),n.appendChild(a))}},L=(n,s,e)=>{const r=s/(n.length-1);let t=n.map(p=>p.value);t=t.filter(function(p){return p!==void 0});const o=Math.min(...t),c=Math.max(...t),a=c-o,d=e/a*.9,i=-o*d;return{coordinates:n.map((p,y)=>{const b=y*r,A=e-(p.value-o)*d;return[Math.floor(b),Math.floor(A)]}),yRange:a,yTranslationFactor:i,yScaleFactor:d,minY:o,maxY:c,xDistance:r}};let S=document.getElementById("yCrosshairToggle"),E=document.getElementById("xCrosshairToggle");S.addEventListener("change",()=>{l.methods.crosshair.setX()});E.addEventListener("change",()=>{l.methods.crosshair.setY()});const D=n=>{const s=k(102.4,0,819.2,460.8);s.style.cursor="none",n.appendChild(s);const e=s.getBoundingClientRect(),r=u(0,0,0,0);r.style.cursor="none";const t=u(0,0,0,0);t.style.cursor="none",t.setAttribute("stroke","black"),t.setAttribute("stroke-width",2),t.setAttribute("display","none"),n.appendChild(t),r.setAttribute("stroke","black"),r.setAttribute("stroke-width",2),r.setAttribute("display","none"),n.appendChild(r),s.addEventListener("mousemove",o=>{const c=o.clientX-e.left,a=o.clientY-e.top;c>10&&c<Math.floor(s.width.animVal.value)-10&&a>10&&a<Math.floor(s.height.animVal.value)-10?(l.data.crosshair.lineX?(r.setAttribute("x1",c+1024*.1),r.setAttribute("x2",c+1024*.1),r.setAttribute("y1",0),r.setAttribute("y2",512*.9),r.style.display="block"):r.style.display="none",l.data.crosshair.lineY?(t.setAttribute("x1",0+1024*.1),t.setAttribute("x2",1024-1024*.1),t.setAttribute("y1",a),t.setAttribute("y2",a),t.style.display="block"):t.style.display="none"):(r.style.display="none",t.style.display="none")})},M=(n,s,e,r)=>{const t=e-s,o=t/5,c=6;for(let a=0;a<=5;a++){const d=(r-a*o*r/t)*.9,i=f();i.setAttribute("x",c+30),i.setAttribute("y",d),i.setAttribute("font-size","18"),i.setAttribute("fill","black"),i.textContent=(s+a*o).toFixed(1),n.appendChild(i)}n.appendChild(u(1024*.1,0,1024*.1,r*.9))},B=(n,s,e,r)=>{Math.max(...s.map(t=>t.index))-Math.min(...s.map(t=>t.index));for(let t=0;t<s.length;t++){const o=e*.95/s.length,c=t*(e*.95)/s.length+o+e*.05;console.log(o);const a=u(c*.9,r*.9,c*.9,r*.9-5);n.appendChild(a);const d=f();d.setAttribute("x",c*.9),d.setAttribute("y",r-20),d.setAttribute("font-size","18"),d.setAttribute("fill","black"),d.setAttribute("text-anchor","middle"),d.textContent=s[t].x,n.appendChild(d)}n.appendChild(u(e*.1,r*.9,e*.9,r*.9))},F=n=>{const s=document.getElementById("svg"),e=L(n,1024,512);v(s,e.coordinates),M(s,e.minY,e.maxY,512),B(s,n,1024,512),D(s)};function h(){const n=document.getElementById("svg");n.setAttribute("viewBox","0 0 1024 512"),n.innerHTML="",l.data.dataStatus==="200"?F(l.data.serverData):l.data.dataStatus==="000"?x():C()}const I=()=>{const n=document.getElementById("cropToggleFirst"),s=document.getElementById("cropToggleLast"),e=document.getElementById("getDataBtn"),r=document.getElementById("urlInput"),t=()=>{l.data.dataStatus=!1,l.data.serverData=[],fetch(o).then(i=>i.json()).then(i=>{l.data.cropDataFirst&&i.data.splice(0,1),l.data.cropDataLast&&i.data.splice(-1,1),l.methods.setData(i.data)}).then(()=>{l.methods.setStatus("200"),h()}).catch(i=>{console.error(i),l.methods.setStatus("404"),h()})};let o="/default";const c=i=>{o=i},a=i=>{l.methods.setCropFirst(i)},d=i=>{l.methods.setCropLast(i)};e.addEventListener("click",()=>{t()}),n.addEventListener("change",i=>{a(i.target.checked)}),s.addEventListener("change",i=>{d(i.target.checked)}),r.addEventListener("input",i=>{c(i.target.value)})};let l={data:{serverData:[],dataStatus:"000",cropDataFirst:!1,cropDataLast:!1,crosshair:{lineX:!1,lineY:!1}},methods:{getData:()=>[l.data.serverData,l.data.dataStatus],setData:n=>{l.data.serverData=n},setStatus:n=>{l.data.dataStatus=n},setCropFirst:n=>{l.data.cropDataFirst=n},setCropLast:n=>{l.data.cropDataLast=n},crosshair:{setX:()=>{l.data.crosshair.lineX=!l.data.crosshair.lineX},setY:()=>{l.data.crosshair.lineY=!l.data.crosshair.lineY}}}};function Y(){I()}h();Y();
