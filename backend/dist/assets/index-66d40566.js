(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=e(t);fetch(t.href,o)}})();const C=()=>{fetch("/default.svg").then(s=>s.text()).then(s=>{const r=new DOMParser().parseFromString(s,"image/svg+xml").querySelector("#default"),t=r.querySelector("#back"),o=r.querySelector("#center"),i=r.querySelector("#spin"),a=document.getElementById("svg");a.innerHTML="",a.appendChild(r),t.appendChild(o),t.appendChild(i)})},k=()=>{fetch("/404.svg").then(s=>s.text()).then(s=>{const r=new DOMParser().parseFromString(s,"image/svg+xml").querySelector("#err404"),t=r.querySelector("#cross"),o=t.querySelector("#Line1"),i=t.querySelector("#Line2"),a=document.getElementById("svg");a.innerHTML="",a.appendChild(r),a.appendChild(t),t.appendChild(o),t.appendChild(i)})},g="http://www.w3.org/2000/svg",y=(s,n)=>{const e=document.createElementNS(g,"circle");return e.setAttribute("r","5"),e.setAttribute("cx",s),e.setAttribute("cy",n),e.setAttribute("stroke","black"),e.setAttribute("fill","black"),e.setAttribute("stroke-width","2"),e.setAttribute("class","marker"),e.addEventListener("mousemove",r=>console.log("Marker mouseMove emit")),e.addEventListener("mouseout",()=>console.log("Maker mouseOut emit")),e},p=(s,n,e,r)=>{const t=document.createElementNS(g,"line");return t.setAttribute("x1",`${s}`),t.setAttribute("x2",`${e}`),t.setAttribute("y1",`${n}`),t.setAttribute("y2",`${r}`),t.setAttribute("stroke","black"),t.setAttribute("stroke-width","2"),t.setAttribute("fill","none"),t},L=(s,n,e,r)=>{const t=document.createElementNS(g,"rect");return t.setAttribute("x",`${s}`),t.setAttribute("y",`${n}`),t.setAttribute("width",`${e}`),t.setAttribute("height",`${r}`),t.setAttribute("stroke","none"),t.setAttribute("fill","transparent"),t},b=()=>document.createElementNS(g,"text"),S=(s,n)=>{for(let e=0;e<n.length-1;e++){const r=n[e][0]-(n[e][0]-n[e][0]*.8)+102.4,t=n[e][1]-(n[e][1]-n[e][1]*.9),o=n[e+1][0]-(n[e+1][0]-n[e+1][0]*.8)+1024*.1,i=n[e+1][1]-(n[e+1][1]-n[e+1][1]*.9),a=p(r,t,o,i);a.setAttribute("id",`line${e}`),a.setAttribute("class","chartLine");let d=y(r,t);s.appendChild(d),s.appendChild(a),e==n.length-2&&(d=y(o,i),s.appendChild(d),s.appendChild(a))}},E=(s,n,e)=>{const r=n/(s.length-1);let t=s.map(l=>l.value);t=t.filter(function(l){return l!==void 0});const o=Math.min(...t),i=Math.max(...t),a=i-o,d=e/a*.9,u=-o*d;return{coordinates:s.map((l,A)=>{const v=A*r,x=e-(l.value-o)*d;return[Math.floor(v),Math.floor(x)]}),yRange:a,yTranslationFactor:u,yScaleFactor:d,minY:o,maxY:i,xDistance:r}};let D=document.getElementById("yCrosshairToggle"),M=document.getElementById("xCrosshairToggle");D.addEventListener("change",()=>{c.methods.crosshair.setX()});M.addEventListener("change",()=>{c.methods.crosshair.setY()});const I=s=>{const n=L(102.4,0,819.2,460.8);n.style.cursor="auto",s.appendChild(n);const e=n.getBoundingClientRect(),r=p(0,0,0,0),t=p(0,0,0,0);t.setAttribute("stroke","black"),t.setAttribute("stroke-width",2),t.setAttribute("display","none"),t.style.pointerEvents="none",s.appendChild(t),r.setAttribute("stroke","black"),r.setAttribute("stroke-width",2),r.setAttribute("display","none"),r.style.pointerEvents="none",s.appendChild(r),n.addEventListener("mousemove",o=>{const i=o.clientX-e.left,a=o.clientY-e.top;i>10&&i<Math.floor(n.width.animVal.value)-10&&a>10&&a<Math.floor(n.height.animVal.value)-10?(c.data.crosshair.lineX?(r.setAttribute("x1",i+1024*.1),r.setAttribute("x2",i+1024*.1),r.setAttribute("y1",0),r.setAttribute("y2",512*.9),r.style.display="block"):r.style.display="none",c.data.crosshair.lineY?(t.setAttribute("x1",0+1024*.1),t.setAttribute("x2",1024-1024*.1),t.setAttribute("y1",a),t.setAttribute("y2",a),t.style.display="block"):t.style.display="none"):(r.style.display="none",t.style.display="none")})},B=(s,n,e,r)=>{const t=e-n,o=t/5,i=6;for(let a=0;a<=5;a++){const d=(r-a*o*r/t)*.9,u=b();u.setAttribute("x",i+30),u.setAttribute("y",d),u.setAttribute("font-size","18"),u.setAttribute("fill","black"),u.textContent=(n+a*o).toFixed(1),s.appendChild(u)}s.appendChild(p(1024*.1,0,1024*.1,r*.9))},F=(s,n,e,r)=>{Math.max(...n.map(t=>t.index))-Math.min(...n.map(t=>t.index));for(let t=0;t<n.length;t++){const o=e*.95/n.length,i=t*(e*.95)/n.length+o+e*.05,a=p(i*.9,r*.9,i*.9,r*.9-5);s.appendChild(a);const d=b();d.setAttribute("x",i*.9),d.setAttribute("y",r-20),d.setAttribute("font-size","18"),d.setAttribute("fill","black"),d.setAttribute("text-anchor","middle"),d.textContent=n[t].x,s.appendChild(d)}s.appendChild(p(e*.1,r*.9,e*.9,r*.9))},Y=s=>{const n=document.getElementById("svg"),e=E(s,1024,512);S(n,e.coordinates),B(n,e.minY,e.maxY,512),F(n,s,1024,512),I(n)};function m(){const s=document.getElementById("svg");s.setAttribute("viewBox","0 0 1024 512"),s.innerHTML="",c.data.dataStatus==="200"?Y(c.data.serverData):c.data.dataStatus==="000"?C():k()}const w=()=>{const s=document.getElementById("cropToggleFirst"),n=document.getElementById("cropToggleLast"),e=document.getElementById("getDataBtn"),r=document.getElementById("urlInput"),t=()=>{c.data.dataStatus=!1,c.data.serverData=[],fetch(o).then(l=>l.json()).then(l=>{c.data.cropDataFirst&&l.data.splice(0,1),c.data.cropDataLast&&l.data.splice(-1,1),c.methods.setData(l.data)}).then(()=>{c.methods.setStatus("200"),m()}).catch(l=>{console.error(l),c.methods.setStatus("404"),m()})};let o="/default";const i=l=>{o=l},a=l=>{c.methods.setCropFirst(l)},d=l=>{c.methods.setCropLast(l)};let u;const h=()=>{u=setInterval(t,5e3)},f=()=>{clearInterval(u)};e.addEventListener("click",()=>{t(),u&&(f(),u=null),h()}),s.addEventListener("change",l=>{a(l.target.checked)}),n.addEventListener("change",l=>{d(l.target.checked)}),r.addEventListener("input",l=>{i(l.target.value)})};let c={data:{serverData:[],dataStatus:"000",cropDataFirst:!1,cropDataLast:!1,crosshair:{lineX:!1,lineY:!1}},methods:{getData:()=>[c.data.serverData,c.data.dataStatus],setData:s=>{c.data.serverData=s},setStatus:s=>{c.data.dataStatus=s},setCropFirst:s=>{c.data.cropDataFirst=s},setCropLast:s=>{c.data.cropDataLast=s},crosshair:{setX:()=>{c.data.crosshair.lineX=!c.data.crosshair.lineX},setY:()=>{c.data.crosshair.lineY=!c.data.crosshair.lineY}}}};function T(){w()}m();T();
