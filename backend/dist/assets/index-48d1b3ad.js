(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=e(t);fetch(t.href,r)}})();const k=()=>{fetch("/default.svg").then(s=>s.text()).then(s=>{const o=new DOMParser().parseFromString(s,"image/svg+xml").querySelector("#default"),t=o.querySelector("#back"),r=o.querySelector("#center"),i=o.querySelector("#spin"),a=document.getElementById("svg");a.innerHTML="",a.appendChild(o),t.appendChild(r),t.appendChild(i)})},L=()=>{fetch("/404.svg").then(s=>s.text()).then(s=>{const o=new DOMParser().parseFromString(s,"image/svg+xml").querySelector("#err404"),t=o.querySelector("#cross"),r=t.querySelector("#Line1"),i=t.querySelector("#Line2"),a=document.getElementById("svg");a.innerHTML="",a.appendChild(o),a.appendChild(t),t.appendChild(r),t.appendChild(i)})},m="http://www.w3.org/2000/svg",f=(s,n)=>{const e=document.createElementNS(m,"circle");return e.setAttribute("r","5"),e.setAttribute("cx",s),e.setAttribute("cy",n),e.setAttribute("stroke","black"),e.setAttribute("fill","black"),e.setAttribute("stroke-width","2"),e.setAttribute("class","marker"),e.addEventListener("mousemove",o=>console.log("Marker mouseMove emit")),e.addEventListener("mouseout",()=>console.log("Maker mouseOut emit")),e},h=(s,n,e,o)=>{const t=document.createElementNS(m,"line");return t.setAttribute("x1",`${s}`),t.setAttribute("x2",`${e}`),t.setAttribute("y1",`${n}`),t.setAttribute("y2",`${o}`),t.setAttribute("stroke","black"),t.setAttribute("stroke-width","2"),t.setAttribute("fill","none"),t},x=(s,n,e,o)=>{const t=document.createElementNS(m,"rect");return t.setAttribute("x",`${s}`),t.setAttribute("y",`${n}`),t.setAttribute("width",`${e}`),t.setAttribute("height",`${o}`),t.setAttribute("stroke","none"),t.setAttribute("fill","transparent"),t},b=()=>document.createElementNS(m,"text"),E=(s,n)=>{for(let e=0;e<n.length-1;e++){const o=n[e][0]-(n[e][0]-n[e][0]*.8)+102.4,t=n[e][1]-(n[e][1]-n[e][1]*.9),r=n[e+1][0]-(n[e+1][0]-n[e+1][0]*.8)+1024*.1,i=n[e+1][1]-(n[e+1][1]-n[e+1][1]*.9),a=h(o,t,r,i);a.setAttribute("id",`line${e}`),a.setAttribute("class","chartLine");let d=f(o,t);s.appendChild(d),s.appendChild(a),e==n.length-2&&(d=f(r,i),s.appendChild(d),s.appendChild(a))}},S=(s,n,e)=>{const o=n/(s.length-1);let t=s.map(c=>c.value);t=t.filter(function(c){return c!==void 0});const r=Math.min(...t),i=Math.max(...t),a=i-r,d=e/a*.9,u=-r*d;return{coordinates:s.map((c,A)=>{const v=A*o,C=e-(c.value-r)*d;return[Math.floor(v),Math.floor(C)]}),yRange:a,yTranslationFactor:u,yScaleFactor:d,minY:r,maxY:i,xDistance:o}};let B=document.getElementById("yCrosshairToggle"),D=document.getElementById("xCrosshairToggle");B.addEventListener("change",()=>{l.methods.crosshair.setX()});D.addEventListener("change",()=>{l.methods.crosshair.setY()});const I=s=>{const n=document.getElementById("triggerBox").getBoundingClientRect(),e=h(0,0,0,0),o=h(0,0,0,0);o.setAttribute("stroke","black"),o.setAttribute("stroke-width",2),o.setAttribute("display","none"),o.style.pointerEvents="none",s.appendChild(o),e.setAttribute("stroke","black"),e.setAttribute("stroke-width",2),e.setAttribute("display","none"),e.style.pointerEvents="none",s.appendChild(e),triggerBox.addEventListener("mousemove",t=>{const r=t.clientX-n.left,i=t.clientY-n.top;r>10&&r<Math.floor(triggerBox.width.animVal.value)-10&&i>10&&i<Math.floor(triggerBox.height.animVal.value)-10?(l.data.crosshair.lineX?(e.setAttribute("x1",r+1024*.1),e.setAttribute("x2",r+1024*.1),e.setAttribute("y1",0),e.setAttribute("y2",512*.9),e.style.display="block"):e.style.display="none",l.data.crosshair.lineY?(o.setAttribute("x1",0+1024*.1),o.setAttribute("x2",1024-1024*.1),o.setAttribute("y1",i),o.setAttribute("y2",i),o.style.display="block"):o.style.display="none"):(e.style.display="none",o.style.display="none")})},M=(s,n,e,o)=>{let t=x(0,0,102.4,51.2);t.setAttribute("fill","aqua"),t.style.pointerEvents="none",t.style.position="relative",t.style.zIndex=0,t.style.display="none",s.appendChild(t);let r=b();r.setAttribute("x",100),r.setAttribute("y",100),r.setAttribute("font-size","20"),r.setAttribute("fill","black"),r.textContent="Shalom",r.style.pointerEvents="none",r.style.position="relative",r.style.zIndex=1,r.style.display="none",s.appendChild(r);let i=e-n;console.log(i);const a=document.getElementById("triggerBox"),d=a.getBoundingClientRect();a.addEventListener("mousemove",u=>{const p=u.clientX-d.left,g=u.clientY-d.top;p>10&&p<Math.floor(a.width.animVal.value)-10&&g>10&&g<Math.floor(a.height.animVal.value)-10?(r.style.display="block",r.setAttribute("y",g+o*.1),r.setAttribute("x",p+1024*.1),r.textContent=`Y: ${(e-g/(o*.9)*i).toFixed(1)}`,t.style.display="block",t.setAttribute("y",g+o*.3*.1),t.setAttribute("x",p+1024*.9*.1)):(r.style.display="none",t.style.display="none")})},Y=s=>{const n=x(102.4,0,819.2,460.8);n.id="triggerBox",n.style.cursor="auto",s.appendChild(n)},F=(s,n,e,o)=>{const t=e-n,r=t/5,i=6;for(let a=0;a<=5;a++){const d=(o-a*r*o/t)*.9,u=b();u.setAttribute("x",i+30),u.setAttribute("y",d),u.setAttribute("font-size","18"),u.setAttribute("fill","black"),u.textContent=(n+a*r).toFixed(1),s.appendChild(u)}s.appendChild(h(1024*.1,0,1024*.1,o*.9))},T=(s,n,e,o)=>{Math.max(...n.map(t=>t.index))-Math.min(...n.map(t=>t.index));for(let t=0;t<n.length;t++){const r=e*.95/n.length,i=t*(e*.95)/n.length+r+e*.05,a=h(i*.9,o*.9,i*.9,o*.9-5);s.appendChild(a);const d=b();d.setAttribute("x",i*.9),d.setAttribute("y",o-20),d.setAttribute("font-size","18"),d.setAttribute("fill","black"),d.setAttribute("text-anchor","middle"),d.textContent=n[t].x,s.appendChild(d)}s.appendChild(h(e*.1,o*.9,e*.9,o*.9))},w=s=>{const n=document.getElementById("svg"),e=S(s,1024,512);E(n,e.coordinates),F(n,e.minY,e.maxY,512),T(n,s,1024,512),Y(n,e.minY,e.maxY),I(n),M(n,e.minY,e.maxY,512)};function y(){const s=document.getElementById("svg");s.setAttribute("viewBox","0 0 1024 512"),s.innerHTML="",l.data.dataStatus==="200"?w(l.data.serverData):l.data.dataStatus==="000"?k():L()}const X=()=>{const s=document.getElementById("cropToggleFirst"),n=document.getElementById("cropToggleLast"),e=document.getElementById("getDataBtn"),o=document.getElementById("urlInput"),t=()=>{l.data.dataStatus=!1,l.data.serverData=[],fetch(r).then(c=>c.json()).then(c=>{l.data.cropDataFirst&&c.data.splice(0,1),l.data.cropDataLast&&c.data.splice(-1,1),l.methods.setData(c.data)}).then(()=>{l.methods.setStatus("200"),y()}).catch(c=>{console.error(c),l.methods.setStatus("404"),y()})};let r="/default";const i=c=>{r=c},a=c=>{l.methods.setCropFirst(c)},d=c=>{l.methods.setCropLast(c)};let u;const p=()=>{u=setInterval(t,5e3)},g=()=>{clearInterval(u)};e.addEventListener("click",()=>{t(),u&&(g(),u=null),p()}),s.addEventListener("change",c=>{a(c.target.checked)}),n.addEventListener("change",c=>{d(c.target.checked)}),o.addEventListener("input",c=>{i(c.target.value)})};let l={data:{serverData:[],dataStatus:"000",cropDataFirst:!1,cropDataLast:!1,crosshair:{lineX:!1,lineY:!1}},methods:{getData:()=>[l.data.serverData,l.data.dataStatus],setData:s=>{l.data.serverData=s},setStatus:s=>{l.data.dataStatus=s},setCropFirst:s=>{l.data.cropDataFirst=s},setCropLast:s=>{l.data.cropDataLast=s},crosshair:{setX:()=>{l.data.crosshair.lineX=!l.data.crosshair.lineX},setY:()=>{l.data.crosshair.lineY=!l.data.crosshair.lineY}}}};function q(){X()}y();q();
